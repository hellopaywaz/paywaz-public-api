- name: Locate OpenAPI file
  run: |
    if [ -f openapi/openapi.yaml ]; then
      echo "OPENAPI_PATH=openapi/openapi.yaml" >> $GITHUB_ENV
    elif [ -f openapi/openapi.yml ]; then
      echo "OPENAPI_PATH=openapi/openapi.yml" >> $GITHUB_ENV
    elif [ -f openapi.yaml ]; then
      echo "OPENAPI_PATH=openapi.yaml" >> $GITHUB_ENV
    else
      echo "‚ùå Could not find openapi file"
      ls -la
      ls -la openapi || true
      exit 1
    fi

- name: Lint OpenAPI
  run: npx @redocly/cli@latest lint $OPENAPI_PATH
